cmake_minimum_required(VERSION 3.5 FATAL_ERROR)

if(TARGET @CPM_ARGS_NAME@)
  return()
endif()

find_package(@CPM_ARGS_NAME@ @CPM_ARGS_VERSION@ QUIET)

if(${PACKAGE_FOUND})
  set_target_properties(@CPM_ARGS_NAME@ 
    PROPERTIES
      IMPORTED_GLOBAL True
  )
else()

  download_project(
    PROJ @CPM_ARGS_NAME@
    GIT_REPOSITORY @CPM_ARGS_GIT_REPOSITORY@
    GIT_TAG @CPM_ARGS_GIT_TAG@
    UPDATE_DISCONNECTED @CPM_OFFLINE@
    GIT_SHALLOW 1
    PREFIX @CPM_ARGS_BINARY_DIR@/dl
    QUIET
  )

  add_subdirectory(${@CPM_ARGS_NAME@_SOURCE_DIR} ${@CPM_ARGS_NAME@_BINARY_DIR})
endif()
